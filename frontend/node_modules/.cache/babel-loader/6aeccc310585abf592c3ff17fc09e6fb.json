{"ast":null,"code":"var _jsxFileName = \"E:\\\\04-PROJEKTI\\\\online-hats\\\\frontend\\\\src\\\\screens\\\\productScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { detailsProduct, saveProductReview } from '../redux/product/products.actions';\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../redux/product/products.types';\nimport Rating from '../components/rating';\n\nfunction ProductScreen(props) {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    product,\n    loading,\n    error\n  } = productDetails;\n  const productReviewSave = useSelector(state => state.productReviewSave);\n  const {\n    success: productSaveSuccess\n  } = productReviewSave;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productSaveSuccess) {\n      alert(\"Review submitted successfully.\");\n      setRating(0);\n      setComment('');\n      dispatch({\n        type: PRODUCT_REVIEW_SAVE_RESET\n      });\n    }\n\n    dispatch(detailsProduct(props.match.params.id)); //console.log(props.match.params.id);\n\n    return () => {//\n    };\n  }, [productSaveSuccess]);\n\n  const submitHandler = e => {\n    e.preventDefault(); //dispatch actions\n\n    dispatch(saveProductReview(props.match.params.id, {\n      name: userInfo.name,\n      rating: rating,\n      comment: comment\n    }));\n  };\n\n  const handleAddToCart = () => {\n    props.history.push(\"/cart/\" + props.match.params.id + \"?qty=\" + qty);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back-to-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, \"<< Back to result\")), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.img,\n    alt: \"product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 10\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.reviews.rating,\n    text: product.numReview + ' reviews',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 6\n    }\n  }, \"Price: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, \"\\u20AC\", product.price)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }, \"Description:\", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, product.description)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 6\n    }\n  }, \"Price: \\u20AC\", product.price), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 6\n    }\n  }, \"Status: \", product.countInStock > 0 ? \"In stock\" : \"Out of stock\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  }, \"Qty: \", /*#__PURE__*/React.createElement(\"select\", {\n    value: qty,\n    onChange: e => {\n      setQty(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 8\n    }\n  }, x + 1)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 6\n    }\n  }, product.countInStock > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddToCart,\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 8\n    }\n  }, \"Add to cart\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }, \"Reviews\"), !product.reviews.length && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 32\n    }\n  }, \"There is no review\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"review\",\n    id: \"reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 4\n    }\n  }, product.reviews.map(review => /*#__PURE__*/React.createElement(\"li\", {\n    key: review._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, review.name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, review.createdAt.substring(0, 10)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, review.comment))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 6\n    }\n  }, \"Write a customer review\"), userInfo ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"rating\",\n    id: \"rating\",\n    value: rating,\n    onChange: e => setRating(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 10\n    }\n  }, \"1-Poor\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 10\n    }\n  }, \"2-Fair\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 10\n    }\n  }, \"3-Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 10\n    }\n  }, \"4-Very Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 10\n    }\n  }, \"5-Excelent\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"comment\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, \"Submit\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 6\n    }\n  }, \"Please, \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, \"Sign-in\"), \" to write review\"))))));\n}\n\nexport default ProductScreen;","map":{"version":3,"sources":["E:/04-PROJEKTI/online-hats/frontend/src/screens/productScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","detailsProduct","saveProductReview","PRODUCT_REVIEW_SAVE_RESET","Rating","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","success","productSaveSuccess","dispatch","alert","type","match","params","id","submitHandler","e","preventDefault","name","handleAddToCart","history","push","img","reviews","numReview","price","description","countInStock","target","value","Array","keys","map","x","length","review","_id","createdAt","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { detailsProduct, saveProductReview } from '../redux/product/products.actions';\r\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../redux/product/products.types';\r\nimport Rating from '../components/rating';\r\n\r\nfunction ProductScreen(props) {\r\n\tconst [qty, setQty] = useState(1);\r\n\tconst [rating, setRating] = useState(0);\r\n\tconst [comment, setComment] = useState('');\r\n\tconst userSignin = useSelector(state => state.userSignin);\r\n\tconst { userInfo } = userSignin;\r\n\r\n\tconst productDetails = useSelector(state => state.productDetails);\r\n\tconst { product, loading, error } = productDetails;\r\n\r\n\tconst productReviewSave = useSelector(state => state.productReviewSave);\r\n\tconst { success: productSaveSuccess } = productReviewSave;\r\n\r\n\tconst dispatch = useDispatch();\r\n\tuseEffect(()=> {\r\n\t\tif(productSaveSuccess) {\r\n\t\t\talert(\"Review submitted successfully.\");\r\n\t\t\tsetRating(0);\r\n\t\t\tsetComment('');\r\n\t\t\tdispatch({type: PRODUCT_REVIEW_SAVE_RESET})\r\n\t\t}\r\n\t\tdispatch(detailsProduct(props.match.params.id));\r\n\t\t//console.log(props.match.params.id);\r\n\t\treturn () => {\r\n\t\t\t//\r\n\t\t};\r\n\t}, [productSaveSuccess]);\r\n\tconst submitHandler = (e) => {\r\n\t\te.preventDefault();\r\n\t\t//dispatch actions\r\n\t\tdispatch(saveProductReview(props.match.params.id, {\r\n\t\t\tname: userInfo.name,\r\n\t\t\trating: rating,\r\n\t\t\tcomment: comment\r\n\t\t}));\r\n\t}\r\n\tconst handleAddToCart = () => {\r\n\t\tprops.history.push(\"/cart/\" + props.match.params.id + \"?qty=\" + qty);\r\n\t}\r\n\treturn (\r\n\t<div>\r\n\t\t<div className='back-to-result'>\r\n\t\t\t<Link to='/'>&#60;&#60; Back to result</Link>\r\n\t\t</div>\r\n\t\t{ loading ? ( <div>Loading...</div> ) : \r\n\t\terror ? ( <div>{error}</div>    \r\n\t\t) : (\r\n\t\t<>\t\t\r\n\t\t<div className='details'>\r\n\t\t\t<div className='details-image'>\r\n\t\t\t\t<img src={product.img} alt='product' />\r\n\t\t\t</div>\r\n\t\t\t<div className='details-info'>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><h4>{product.name}</h4></li>\t\t\t\t\t\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href=\"#reviews\">\r\n\t\t\t\t\t\t\t<Rating value={product.reviews.rating} text={product.numReview + ' reviews'}/>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>Price: <b>&#8364;{product.price}</b></li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\tDescription: \r\n\t\t\t\t\t\t<div>{product.description}</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className='details-action'>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>Price: &#8364;{product.price}</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\tStatus: {product.countInStock > 0 ? \"In stock\": \"Out of stock\"}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>Qty: <select value={qty} onChange={(e) => {setQty(e.target.value)}}>\r\n\t\t\t\t\t\t{[...Array(product.countInStock).keys()].map(x=> \r\n\t\t\t\t\t\t\t<option key={x+1} value={x+1}>{x+1}</option>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t{product.countInStock> 0 && \r\n\t\t\t\t\t\t\t<button onClick={handleAddToCart} className='button primary'>Add to cart</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div className='content-margined'>\r\n\t\t\t<h2>Reviews</h2>\r\n\t\t\t{!product.reviews.length && <div>There is no review</div>}\r\n\t\t\t<ul className='review' id=\"reviews\">\t\t\t\r\n\t\t\t{product.reviews.map(review => ( \r\n\t\t\t\t\t<li key={review._id}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{review.name}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Rating value={review.rating} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{review.createdAt.substring(0,10)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{review.comment}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<h3>Write a customer review</h3>\r\n\t\t\t\t\t{userInfo ? ( <form onSubmit={submitHandler}> \r\n\t\t\t\t\t\t<ul className='form-container'>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor='rating'>Rating</label>\r\n\t\t\t\t\t\t\t\t<select name=\"rating\" \r\n\t\t\t\t\t\t\t\t\t\tid=\"rating\" value={rating} onChange={(e) => setRating(e.target.value)} >\r\n\t\t\t\t\t\t\t\t\t<option value=\"1\">1-Poor</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"2\">2-Fair</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"3\">3-Good</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"4\">4-Very Good</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"5\">5-Excelent</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"comment\">Comment</label>\r\n\t\t\t\t\t\t\t\t<textarea name=\"comment\" value={comment} onChange={(e) => setComment(e.target.value)} />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"button primary\">Submit</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\tPlease, <Link to='/signin'>Sign-in</Link> to write review \r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t)}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t</>\t\t\t\r\n\t\t)}\t\t\t\t\r\n\t</div>\r\n\t);\r\n}\r\nexport default ProductScreen;"]},"metadata":{},"sourceType":"module"}